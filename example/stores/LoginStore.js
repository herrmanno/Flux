var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var LoginStore = (function (_super) {
    __extends(LoginStore, _super);
    function LoginStore() {
        _super.apply(this, arguments);
    }
    LoginStore.prototype.init = function () {
        this.data = {};
    };
    LoginStore.prototype.login = function (user) {
        if (user.name === this.data.name && user.password === this.data.password)
            return;
        var found = JSON.parse(localStorage['users'] || '[]')
            .filter(function (u) {
            return u.name === user.name && u.password === user.password;
        })[0];
        if (found) {
            this.data = found;
            this.changed();
            ho.flux.DISPATCHER.dispatch({ type: LoginStore.actions.LOGIN_SUCCES });
        }
        else {
            this.data.error = "Username or Password is wrong!";
            ho.flux.DISPATCHER.dispatch({ type: LoginStore.actions.LOGIN_ERROR });
        }
        this.changed();
    };
    LoginStore.prototype.isLoggedIn = function () {
        return !!this.data;
    };
    LoginStore.actions = {
        LOGIN_SUCCES: 'LOGIN_SUCCES',
        LOGIN_ERROR: 'LOGIN_ERROR'
    };
    return LoginStore;
})(ho.flux.Store);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9naW5TdG9yZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkxvZ2luU3RvcmUudHMiXSwibmFtZXMiOlsiTG9naW5TdG9yZSIsIkxvZ2luU3RvcmUuY29uc3RydWN0b3IiLCJMb2dpblN0b3JlLmluaXQiLCJMb2dpblN0b3JlLmxvZ2luIiwiTG9naW5TdG9yZS5pc0xvZ2dlZEluIl0sIm1hcHBpbmdzIjoiOzs7OztBQUlBO0lBQXlCQSw4QkFBNkJBO0lBQXREQTtRQUF5QkMsOEJBQTZCQTtJQXdDdERBLENBQUNBO0lBaENBRCx5QkFBSUEsR0FBSkE7UUFDQ0UsSUFBSUEsQ0FBQ0EsSUFBSUEsR0FBbUJBLEVBQUVBLENBQUNBO0lBQ2hDQSxDQUFDQTtJQUVERiwwQkFBS0EsR0FBTEEsVUFBTUEsSUFBV0E7UUFDaEJHLEVBQUVBLENBQUFBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLEtBQUtBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLElBQUlBLElBQUlBLElBQUlBLENBQUNBLFFBQVFBLEtBQUtBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLFFBQVFBLENBQUNBO1lBQ3ZFQSxNQUFNQSxDQUFDQTtRQUVSQSxJQUFJQSxLQUFLQSxHQUFHQSxJQUFJQSxDQUFDQSxLQUFLQSxDQUFDQSxZQUFZQSxDQUFDQSxPQUFPQSxDQUFDQSxJQUFJQSxJQUFJQSxDQUFDQTthQUNwREEsTUFBTUEsQ0FBQ0EsVUFBQ0EsQ0FBQ0E7WUFDVEEsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsS0FBS0EsSUFBSUEsQ0FBQ0EsSUFBSUEsSUFBSUEsQ0FBQ0EsQ0FBQ0EsUUFBUUEsS0FBS0EsSUFBSUEsQ0FBQ0EsUUFBUUEsQ0FBQ0E7UUFDN0RBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBLENBQUNBO1FBRU5BLEVBQUVBLENBQUFBLENBQUNBLEtBQUtBLENBQUNBLENBQUNBLENBQUNBO1lBQ1ZBLElBQUlBLENBQUNBLElBQUlBLEdBQUdBLEtBQUtBLENBQUNBO1lBQ2xCQSxJQUFJQSxDQUFDQSxPQUFPQSxFQUFFQSxDQUFDQTtZQUNmQSxFQUFFQSxDQUFDQSxJQUFJQSxDQUFDQSxVQUFVQSxDQUFDQSxRQUFRQSxDQUFDQSxFQUFDQSxJQUFJQSxFQUFFQSxVQUFVQSxDQUFDQSxPQUFPQSxDQUFDQSxZQUFZQSxFQUFDQSxDQUFDQSxDQUFDQTtRQUN0RUEsQ0FBQ0E7UUFBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0E7WUFDUEEsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsS0FBS0EsR0FBR0EsZ0NBQWdDQSxDQUFBQTtZQUNsREEsRUFBRUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsUUFBUUEsQ0FBQ0EsRUFBQ0EsSUFBSUEsRUFBRUEsVUFBVUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsV0FBV0EsRUFBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDckVBLENBQUNBO1FBRURBLElBQUlBLENBQUNBLE9BQU9BLEVBQUVBLENBQUNBO0lBRWhCQSxDQUFDQTtJQUVESCwrQkFBVUEsR0FBVkE7UUFDQ0ksTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7SUFDcEJBLENBQUNBO0lBbENNSixrQkFBT0EsR0FBR0E7UUFDaEJBLFlBQVlBLEVBQUVBLGNBQWNBO1FBQzVCQSxXQUFXQSxFQUFFQSxhQUFhQTtLQUMxQkEsQ0FBQUE7SUFtQ0ZBLGlCQUFDQTtBQUFEQSxDQUFDQSxBQXhDRCxFQUF5QixFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssRUF3Q3JDIiwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIExvZ2luU3RvcmVEYXRhIGV4dGVuZHMgSVVzZXIge1xuXHRlcnJvcjogc3RyaW5nO1xufVxuXG5jbGFzcyBMb2dpblN0b3JlIGV4dGVuZHMgaG8uZmx1eC5TdG9yZTxMb2dpblN0b3JlRGF0YT4ge1xuXG5cdHN0YXRpYyBhY3Rpb25zID0ge1xuXHRcdExPR0lOX1NVQ0NFUzogJ0xPR0lOX1NVQ0NFUycsXG5cdFx0TE9HSU5fRVJST1I6ICdMT0dJTl9FUlJPUidcblx0fVxuXG5cblx0aW5pdCgpIHtcblx0XHR0aGlzLmRhdGEgPSA8TG9naW5TdG9yZURhdGE+e307XG5cdH1cblxuXHRsb2dpbih1c2VyOiBJVXNlcik6IHZvaWQge1xuXHRcdGlmKHVzZXIubmFtZSA9PT0gdGhpcy5kYXRhLm5hbWUgJiYgdXNlci5wYXNzd29yZCA9PT0gdGhpcy5kYXRhLnBhc3N3b3JkKVxuXHRcdFx0cmV0dXJuO1xuXG5cdFx0bGV0IGZvdW5kID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VbJ3VzZXJzJ10gfHwgJ1tdJylcblx0XHQuZmlsdGVyKCh1KSA9PiB7XG5cdFx0XHRyZXR1cm4gdS5uYW1lID09PSB1c2VyLm5hbWUgJiYgdS5wYXNzd29yZCA9PT0gdXNlci5wYXNzd29yZDtcblx0XHR9KVswXTtcblxuXHRcdGlmKGZvdW5kKSB7XG5cdFx0XHR0aGlzLmRhdGEgPSBmb3VuZDtcblx0XHRcdHRoaXMuY2hhbmdlZCgpO1xuXHRcdFx0aG8uZmx1eC5ESVNQQVRDSEVSLmRpc3BhdGNoKHt0eXBlOiBMb2dpblN0b3JlLmFjdGlvbnMuTE9HSU5fU1VDQ0VTfSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZGF0YS5lcnJvciA9IFwiVXNlcm5hbWUgb3IgUGFzc3dvcmQgaXMgd3JvbmchXCJcblx0XHRcdGhvLmZsdXguRElTUEFUQ0hFUi5kaXNwYXRjaCh7dHlwZTogTG9naW5TdG9yZS5hY3Rpb25zLkxPR0lOX0VSUk9SfSk7XG5cdFx0fVxuXG5cdFx0dGhpcy5jaGFuZ2VkKCk7XG5cblx0fVxuXG5cdGlzTG9nZ2VkSW4oKTogYm9vbGVhbiB7XG5cdFx0cmV0dXJuICEhdGhpcy5kYXRhO1xuXHR9XG5cblxuXG59XG4iXX0=