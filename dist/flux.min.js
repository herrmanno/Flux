var ho;!function(t){var i;!function(t){var i=function(){function t(){this.prefix="ID_",this.lastID=1,this.callbacks={}}return t.prototype.register=function(t){var i=this.prefix+this.lastID++;return this.callbacks[i]=t,i},t.prototype.unregister=function(t){if(!this.callbacks[t])throw"Could not unregister callback for id "+t;delete this.callbacks[t]},t}();t.CallbackHolder=i}(i=t.flux||(t.flux={}))}(ho||(ho={}));var __extends=this&&this.__extends||function(t,i){function n(){this.constructor=t}for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);n.prototype=i.prototype,t.prototype=new n},ho;!function(t){var i;!function(t){var i=function(t){function i(){t.apply(this,arguments),this.isPending={},this.isHandled={},this.isDispatching=!1,this.pendingPayload=null}return __extends(i,t),i.prototype.waitFor=function(){for(var t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];if(!this.isDispatching)throw"Dispatcher.waitFor(...): Must be invoked while dispatching.";for(var n=0;n<t.length;n++){var o=t[n];if(this.isPending[o]){if(!this.isHandled[o])throw"waitFor(...): Circular dependency detected while wating for "+o}else{if(!this.callbacks[o])throw"waitFor(...): "+o+" does not map to a registered callback.";this.invokeCallback(o)}}},i.prototype.dispatch=function(t){if(this.isDispatching)throw"Cannot dispatch in the middle of a dispatch.";this.startDispatching(t);try{for(var i in this.callbacks)this.isPending[i]||this.invokeCallback(i)}finally{this.stopDispatching()}},i.prototype.invokeCallback=function(t){this.isPending[t]=!0,this.callbacks[t](this.pendingPayload),this.isHandled[t]=!0},i.prototype.startDispatching=function(t){for(var i in this.callbacks)this.isPending[i]=!1,this.isHandled[i]=!1;this.pendingPayload=t,this.isDispatching=!0},i.prototype.stopDispatching=function(){this.pendingPayload=null,this.isDispatching=!1},i}(t.CallbackHolder);t.Dispatcher=i}(i=t.flux||(t.flux={}))}(ho||(ho={}));var ho;!function(t){var i;!function(i){var n;!function(n){var o=t.promise.Promise,e=function(){function t(){this.useMin=!1}return t.prototype.resolve=function(t){return this.useMin?"stores/"+t+".min.js":"stores/"+t+".js"},t.prototype.getStore=function(t){var n=this;return void 0!==window[t]&&window[t].prototype instanceof i.Store?o.create(window[t]):new o(function(i,o){var e=n.resolve(t),r=document.createElement("script");r.onload=function(){"function"==typeof window[t]?i(window[t]):o("Error while loading Attribute "+t)},r.src=e,document.getElementsByTagName("head")[0].appendChild(r)})},t}();n.instance=new e}(n=i.storeprovider||(i.storeprovider={}))}(i=t.flux||(t.flux={}))}(ho||(ho={}));var ho;!function(t){var i;!function(i){function n(t){return void 0!==i.STORES[t]&&i.STORES[t]instanceof i.Store?o.create(i.STORES[t]):new o(function(n,o){i.storeprovider.instance.getStore(t).then(function(t){n(t)})["catch"](function(t){o(t)})})}var o=t.promise.Promise;i.loadStore=n}(i=t.flux||(t.flux={}))}(ho||(ho={}));var ho;!function(t){var i;!function(i){var n=function(i){function n(){i.call(this),this.handlers={},this.id=t.flux.DISPATCHER.register(this.handle),this.init()}return __extends(n,i),n.prototype.init=function(){},n.prototype.on=function(t,i){this.handlers[t]=i},n.prototype.handle=function(t){"function"==typeof this.handlers[t.type]&&this.handlers[t.type](t.data)},n.prototype.changed=function(){for(var t in this.callbacks){var i=this.callbacks[t];i&&i(this.data)}},n}(i.CallbackHolder);i.Store=n}(i=t.flux||(t.flux={}))}(ho||(ho={}));var ho;!function(t){var i;!function(t){t.DISPATCHER=new t.Dispatcher,t.STORES={}}(i=t.flux||(t.flux={}))}(ho||(ho={}));